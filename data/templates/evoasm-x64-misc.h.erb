/* vim: set filetype=c: */
/* AUTOGENERATED FILE, DO NOT EDIT */

/*
 * Copyright (C) 2016 Julian Aron Prenner <jap@polyadic.com>
 *
 * This program is free software: you can redistribute it and/or modify
 * it under the terms of the GNU Affero General Public License as published by
 * the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU Affero General Public License for more details.
 *
 * You should have received a copy of the GNU Affero General Public License
 * along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */

#pragma once

static inline evoasm_x64_reg_type_t
evoasm_x64_get_reg_type(evoasm_x64_reg_id_t reg) {
  switch(reg) {
<% Evoasm::Gen::X64::REGISTERS.each do |reg_type, regs| %>
  <% regs.each do |reg| %>
    case <%= unit.register_name_to_c reg %>: return <%= unit.register_type_to_c reg_type %>;
  <% end %>
<% end %>
    default: evoasm_assert_not_reached();
  }
}

evoasm_success_t
evoasm_x64_get_features(uint64_t *features);

const char *
evoasm_x64_get_reg_name(evoasm_x64_reg_id_t reg);

#define EVOASM_X64_INSTS_VAR_NAME <%= unit.c_instructions_variable_name %>

<% Evoasm::Gen::X64::SCRATCH_REGISTERS.each_with_index do |reg, index| %>
#define EVOASM_X64_SCRATCH_REG<%= index + 1 %> <%= unit.register_name_to_c reg %>
<% end %>

typedef struct {
evoasm_inst_id_t inst;
int32_t imm;
} evoasm_x64_similar_inst_entry_t;


<% %i(absdiff hamming).each do |metric_name| %>
extern const evoasm_x64_similar_inst_entry_t *evoasm_x64_similar_insts_<%= metric_name %>;
extern const uint16_t                         evoasm_x64_n_similar_insts_idxs_<%= metric_name %>[EVOASM_X64_INST_NONE][2];
<% end %>
